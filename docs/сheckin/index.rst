Регистрация на полигоне
========================

С помощью joinrpg можно регистировать игроков, приезжающих на полигон. Преимущества перед традиционной регистрацией по спискам:

* оперативность регистрации игроков;
* актуальная статитиска по текущему заезду в локации, доступная в режиме реального времени;
* прозрачный прием и учет взносов;
* легко зарегистировать и подготовить раздатку для игроков, выходящих второй ролью.


Подготовка до полигона
---------------------

Для того, чтобы включить модуль регистрации, пройдите в своем проекте: 
**Прочее > Настройки > Настройки регистрации**
Выберите опцию «Включить модуль регистрации». Сохраните настройки.

После **включения модуля регистрации** игроки в принятых заявках увидят уведомление о том, насколько их заявки готовы к регистрации на полигоне. Уведомления бывают следующих типов:

* заявка полностью готова, взнос сдан;

.. figure:: all_ok.png
       :scale: 100 %
       :align: center
       :alt: Все поля заполнены и взнос сдан

* заявка полностью готова, взнос не сдан;

.. figure:: need_money.png
       :scale: 100 %
       :align: center
       :alt: Все поля заполнены, но взнос не сдан	   

* необходимые поля не заполнены игроком, список того, что следует подготовить, выводится в статусе;

.. figure:: player_to_do.png
       :scale: 100 %
       :align: center
       :alt: Не заполнены поля игроком
	   
* не заполнены скрытые мастерские поля, требуется  обратиться к ответственному мастеру за дозаполнением заявки;

.. figure:: master_to_do.png
       :scale: 100 %
       :align: center
       :alt: Не заполнены скрытые мастерские поля

* необходимые поля требуют заполнения и мастером, и игроком, список доступных игроку полей выводится в статусе.	   
	   
.. attention:: Препятствующими прохождению регистрации считаются любые поля, которые помечены как рекомендованные или обязательные.


Включение регистрации на полигоне
-------------------------------

Чтобы начать регистрацию приезжающих на игру, пройдите в своем проекте: 
**Прочее > Настройки > Настройки регистрации**
Выберите опцию «Регистрация в процессе». Сохраните настройки.

Теперь заявках появилась опция «Зарегистировать».

.. figure:: checkin_allowed.png
       :scale: 100 %
       :align: center
       :alt: Кнопка регистрации

Рекомендуемый интерфейс для регистрации доступен через: **Прочее > Регистрация**. 
В выпадающем списке персонажей доступен поиск по следующим параметрам:

* имя персонажа;
* имя, или фамилия, или ник игрока.

.. figure:: checkin_control.png
       :scale: 100 %
       :align: center
       :alt: Строка поиска для регистрации
	   
Сдачу взноса можно отметить как через функцию «Отметить взнос» в заявке, так и непосредственно во время регистрации игрока, как показано ниже на скриншоте окна регистрации. 
Убедитесь, что добавили мастеров, которые могут принимать взносы во время регистрации, в список возможных способов оплаты (как «Наличными — %Имя мастера%»). В противном случае для мастера будет доступна регистрация только тех, кто взнос уже сдал.

.. hint:: Может быть удобно разделить очереди для игроков со сданным взносом и с необходимостью оплаты. Сдавших взнос смогут регистировать любые мастера с доступом в проект.

.. figure:: checking_in.png
       :scale: 100 %
       :align: center
       :alt: Экран регистрации

На экране регистрации выводится список 'раздатки <http://docs.joinrpg.ru/ru/latest/plot/handout.html>'_ — физических вещей, которые получает игрок на полигоне непосредственно перед игрой. В том случае, если вы не формировали конверты для игроков заранее, игрок может получить требуемые вещи по этому списку прямо на регистрации.

После нажатия кнопки «Зарегистрировать игрока» статус заявки меняется на «Игрок заехал», она учитывается в списке зарегистированных игроков и больше не отображается в списке персонажей, доступных для регистрации. В заявке автоматически оставляется комментарий «Пройдена регистрация на полигоне» от имени зарегистрировавшего мастера.

.. attention:: Для регистрации доступны только персонажи, заявка на которых принята. Непринятые заявки и персонажи без игрока в список не попадают.

Статистика зарегистрированных
-------------------------------

Статистика по ходу регистрации доступна по ссылке **Прочее > Регистрация > Статистика по регистрации**.
Показывается число принятых заявок, еще не прошедших регистрацию.

.. hint:: Общую статистику по заявкам и числу персонажей в сетке ролей можно посмотреть **Сетка ролей > Сводный отчет**. Показ статистики для регистрации мы планируем улучшить.

Выход вторыми ролями
---------------------

Чтобы активировать опцию выпуска вторыми ролями, пройдите в своем проекте: 
**Прочее > Настройки > Настройки регистрации**
Выберите опцию «Разрешить выпуск вторыми ролями». Сохраните настройки.

Выпустить второй ролью можно только игрока, заявка которого на игру была зарегистрирована. Непринятые заявки и незарегистрированных игроков выпустить второй ролью нельзя.

.. figure:: new_role.png
       :scale: 100 %
       :align: center
       :alt: Вторая роль

В выпадающем списке персонажей доступен поиск по следующим параметрам:

* имя персонажа;
* ник ответственного мастера.

.. figure:: select_by_name.png
       :scale: 100 %
       :align: center
       :alt: Поиск по имени персонажа
	   
После нажатия кнопки «Выпустить второй ролью» вы перейдете в интерфейс регистрации игрока новым персонажем. В том случае, если у персонажа, которым вы пытаетесь выпустить второй ролью, не заполнены какие-то обязательные поля, регистрация будет невозможно, но  заявка уже будет привязана к этому персонажу. Перейдите на страницу персонажа и заполните все обязательные и рекомендуемые поля персонажа, после этого повторно зарегистрируйте игрока.

.. hint:: Через меню Персонажи > Проблемные персонажи мастера могут заранее заполнить недостающие поля, тогда выпуск новыми ролями будет происходить максимально оперативно.

Работа с блоком регистрации для игроков, выходящих вторыми ролями, ничем не отличается от регистрации только приехавших на игру.
